<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>tech.v3.dataset documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">tech.ml.dataset</span> <span class="project-version">5.0.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="columns-readers-and-datatypes.html"><div class="inner"><span>Columns, Readers, and Datatypes</span></div></a></li><li class="depth-1 "><a href="nippy-serialization-rocks.html"><div class="inner"><span>Nippy Rocks!</span></div></a></li><li class="depth-1 "><a href="quick-reference.html"><div class="inner"><span>Quick Reference - Core API</span></div></a></li><li class="depth-1 "><a href="walkthrough.html"><div class="inner"><span>tech.ml.dataset Walkthrough</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tech</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v3</span></div></div></li><li class="depth-3 current"><a href="tech.v3.dataset.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dataset</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.categorical.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>categorical</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.column-filters.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>column-filters</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-5 branch"><a href="tech.v3.dataset.io.datetime.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datetime</span></div></a></li><li class="depth-5 branch"><a href="tech.v3.dataset.io.string-row-parser.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string-row-parser</span></div></a></li><li class="depth-5"><a href="tech.v3.dataset.io.univocity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>univocity</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.join.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>join</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.math.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>math</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.modelling.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>modelling</span></div></a></li><li class="depth-4"><a href="tech.v3.dataset.tensor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tensor</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tech.v3.dataset.html#var--.3E.3Edataset"><div class="inner"><span>-&gt;&gt;dataset</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var--.3Edataset"><div class="inner"><span>-&gt;dataset</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-add-column"><div class="inner"><span>add-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-add-or-update-column"><div class="inner"><span>add-or-update-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-all-descriptive-stats-names"><div class="inner"><span>all-descriptive-stats-names</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-append-columns"><div class="inner"><span>append-columns</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-assoc-metadata"><div class="inner"><span>assoc-metadata</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-bind-.3E"><div class="inner"><span>bind-&gt;</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-brief"><div class="inner"><span>brief</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-categorical-.3Enumber"><div class="inner"><span>categorical-&gt;number</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-categorical-.3Eone-hot"><div class="inner"><span>categorical-&gt;one-hot</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-column"><div class="inner"><span>column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-column-.3Edataset"><div class="inner"><span>column-&gt;dataset</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-column-cast"><div class="inner"><span>column-cast</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-column-count"><div class="inner"><span>column-count</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-column-labeled-mapseq"><div class="inner"><span>column-labeled-mapseq</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-column-names"><div class="inner"><span>column-names</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-columns"><div class="inner"><span>columns</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-columns-with-missing-seq"><div class="inner"><span>columns-with-missing-seq</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-columnwise-concat"><div class="inner"><span>columnwise-concat</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-concat"><div class="inner"><span>concat</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-concat-copying"><div class="inner"><span>concat-copying</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-concat-inplace"><div class="inner"><span>concat-inplace</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-data-.3Edataset"><div class="inner"><span>data-&gt;dataset</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-dataset-.3Edata"><div class="inner"><span>dataset-&gt;data</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-dataset-.3Esmile-dataframe"><div class="inner"><span>dataset-&gt;smile-dataframe</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-dataset-name"><div class="inner"><span>dataset-name</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-descriptive-stats"><div class="inner"><span>descriptive-stats</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-drop-columns"><div class="inner"><span>drop-columns</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-drop-missing"><div class="inner"><span>drop-missing</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-drop-rows"><div class="inner"><span>drop-rows</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-ensure-array-backed"><div class="inner"><span>ensure-array-backed</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-filter"><div class="inner"><span>filter</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-filter-column"><div class="inner"><span>filter-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-filter-dataset"><div class="inner"><span>filter-dataset</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-group-by"><div class="inner"><span>group-by</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-group-by-.3Eindexes"><div class="inner"><span>group-by-&gt;indexes</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-group-by-column"><div class="inner"><span>group-by-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-group-by-column-.3Eindexes"><div class="inner"><span>group-by-column-&gt;indexes</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-has-column.3F"><div class="inner"><span>has-column?</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-head"><div class="inner"><span>head</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-major-version"><div class="inner"><span>major-version</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-mapseq-reader"><div class="inner"><span>mapseq-reader</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-missing"><div class="inner"><span>missing</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-new-column"><div class="inner"><span>new-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-new-dataset"><div class="inner"><span>new-dataset</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-order-column-names"><div class="inner"><span>order-column-names</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-rand-nth"><div class="inner"><span>rand-nth</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-remove-column"><div class="inner"><span>remove-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-remove-columns"><div class="inner"><span>remove-columns</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-remove-rows"><div class="inner"><span>remove-rows</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-rename-columns"><div class="inner"><span>rename-columns</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-replace-missing"><div class="inner"><span>replace-missing</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-replace-missing-value"><div class="inner"><span>replace-missing-value</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-row-count"><div class="inner"><span>row-count</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-sample"><div class="inner"><span>sample</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-select"><div class="inner"><span>select</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-select-columns"><div class="inner"><span>select-columns</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-select-missing"><div class="inner"><span>select-missing</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-select-rows"><div class="inner"><span>select-rows</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-set-dataset-name"><div class="inner"><span>set-dataset-name</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-shape"><div class="inner"><span>shape</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-shuffle"><div class="inner"><span>shuffle</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-sort-by"><div class="inner"><span>sort-by</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-sort-by-column"><div class="inner"><span>sort-by-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-tail"><div class="inner"><span>tail</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-take-nth"><div class="inner"><span>take-nth</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-unique-by"><div class="inner"><span>unique-by</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-unique-by-column"><div class="inner"><span>unique-by-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-unordered-select"><div class="inner"><span>unordered-select</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-unroll-column"><div class="inner"><span>unroll-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-update-column"><div class="inner"><span>update-column</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-update-columns"><div class="inner"><span>update-columns</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-update-columnwise"><div class="inner"><span>update-columnwise</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-update-elemwise"><div class="inner"><span>update-elemwise</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-value-reader"><div class="inner"><span>value-reader</span></div></a></li><li class="depth-1"><a href="tech.v3.dataset.html#var-write.21"><div class="inner"><span>write!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">tech.v3.dataset</h1><div class="doc"><div class="markdown"><p>Column major dataset abstraction for efficiently manipulating in memory datasets.</p></div></div><div class="public anchor" id="var--.3E.3Edataset"><h3>-&gt;&gt;dataset</h3><div class="usage"><code>(-&gt;&gt;dataset options dataset)</code><code>(-&gt;&gt;dataset dataset)</code></div><div class="doc"><div class="markdown"><p>Please see documentation of -&gt;dataset. Options are the same.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/io.clj#L195">view source</a></div></div><div class="public anchor" id="var--.3Edataset"><h3>-&gt;dataset</h3><div class="usage"><code>(-&gt;dataset dataset {:keys [table-name dataset-name], :as options})</code><code>(-&gt;dataset dataset)</code></div><div class="doc"><div class="markdown"><p>Create a dataset from either csv/tsv or a sequence of maps.</p>
<ul>
  <li>
  <p>A <code>String</code> or <code>InputStream</code> will be interpreted as a file (or gzipped file if it  ends with .gz) of tsv or csv data. The system will attempt to autodetect if this  is csv or tsv and then engineering around detecting datatypes all of which can  be overridden.</p></li>
  <li>
  <p>A sequence of maps may be passed in in which case the first N maps are scanned in  order to derive the column datatypes before the actual columns are created.</p></li>
</ul>
<p>Options:</p>
<ul>
  <li><code>:dataset-name</code> - set the name of the dataset.</li>
  <li>
  <p><code>:file-type</code> - Override filetype discovery mechanism for strings or force a particular parser for an input stream. Note that arrow and parquet must have paths on disk and cannot currently load from input stream. Acceptible file types are:</p>#{:csv :tsv :xlsx :xls :arrow :parquet}.</li>
  <li><code>:gzipped?</code> - for file formats that support it, override autodetection and force  creation of a gzipped input stream as opposed to a normal input stream.</li>
  <li><code>:column-whitelist</code> - either sequence of string column names or sequence of column  indices of columns to whitelist.</li>
  <li><code>:column-blacklist</code> - either sequence of string column names or sequence of column  indices of columns to blacklist.</li>
  <li><code>:num-rows</code> - Number of rows to read</li>
  <li><code>:header-row?</code> - Defaults to true, indicates the first row is a header.</li>
  <li><code>:key-fn</code> - function to be applied to column names. Typical use is:  <code>:key-fn keyword</code>.</li>
  <li><code>:separator</code> - Add a character separator to the list of separators to auto-detect.</li>
  <li><code>:csv-parser</code> - Implementation of univocity’s AbstractParser to use. If not  provided a default permissive parser is used. This way you parse anything that  univocity supports (so flat files and such).</li>
  <li><code>:bad-row-policy</code> - One of three options: :skip, :error, :carry-on. Defaults to  :carry-on. Some csv data has ragged rows and in this case we have several  options. If the option is :carry-on then we either create a new column or add  missing values for columns that had no data for that row.</li>
  <li><code>:skip-bad-rows?</code> - Legacy option. Use :bad-row-policy.</li>
  <li><code>:max-chars-per-column</code> - Defaults to 4096. Columns with more characters that this  will result in an exception.</li>
  <li><code>:max-num-columns</code> - Defaults to 8192. CSV,TSV files with more columns than this  will fail to parse. For more information on this option, please visit:  <a href="https://github.com/uniVocity/univocity-parsers/issues/301">https://github.com/uniVocity/univocity-parsers/issues/301</a></li>
  <li><code>:n-initial-skip-rows</code> - Skip N rows initially. This currently may include the header  row. Works across both csv and spreadsheet datasets.</li>
  <li><code>:parser-fn</code> -</li>
  <li><code>keyword?</code> - all columns parsed to this datatype</li>
  <li>tuple - pair of [datatype <code>parse-data</code>] in which case container of type [datatype] will be created. <code>parse-data</code> can be one of:
    <ul>
      <li><code>:relaxed?</code> - data will be parsed such that parse failures of the standard  parse functions do not stop the parsing process. :unparsed-values and  :unparsed-indexes are available in the metadata of the column that tell  you the values that failed to parse and their respective indexes.</li>
      <li><code>fn?</code> - function from str-&gt; one of <code>:tech.ml.dataset.parser/missing</code>,  <code>:tech.ml.dataset.parser/parse-failure</code>, or the parsed value.  Exceptions here always kill the parse process. :missing will get marked  in the missing indexes, and :parse-failure will result in the index being  added to missing, the unparsed the column’s :unparsed-values and  :unparsed-indexes will be updated.</li>
      <li><code>string?</code> - for datetime types, this will turned into a DateTimeFormatter via  DateTimeFormatter/ofPattern. For encoded-text, this has to be a valid  argument to Charset/forName.</li>
      <li><code>DateTimeFormatter</code> - use with the appropriate temporal parse static function  to parse the value.</li>
    </ul>
  </li>
  <li><code>map?</code> - the header-name-or-idx is used to lookup value. If not nil, then  value can be any of the above options. Else the default column parser  is used.</li>
</ul>
<p>Returns a new dataset</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/io.clj#L87">view source</a></div></div><div class="public anchor" id="var-add-column"><h3>add-column</h3><div class="usage"><code>(add-column dataset column)</code></div><div class="doc"><div class="markdown"><p>Add a new column. Error if name collision</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L104">view source</a></div></div><div class="public anchor" id="var-add-or-update-column"><h3>add-or-update-column</h3><div class="usage"><code>(add-or-update-column dataset colname column)</code><code>(add-or-update-column dataset column)</code></div><div class="doc"><div class="markdown"><p>If column exists, replace. Else append new column.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L170">view source</a></div></div><div class="public anchor" id="var-all-descriptive-stats-names"><h3>all-descriptive-stats-names</h3><div class="usage"><code>(all-descriptive-stats-names)</code></div><div class="doc"><div class="markdown"><p>Returns the names of all descriptive stats in the order they will be returned in the resulting dataset of descriptive stats. This allows easy filtering in the form for (descriptive-stats ds {:stat-names (-&gt;&gt; (all-descriptive-stats-names)  (remove #{:values :num-distinct-values}))})</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L615">view source</a></div></div><div class="public anchor" id="var-append-columns"><h3>append-columns</h3><div class="usage"><code>(append-columns dataset column-seq)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L201">view source</a></div></div><div class="public anchor" id="var-assoc-metadata"><h3>assoc-metadata</h3><div class="usage"><code>(assoc-metadata dataset filter-fn-or-ds k v &amp; args)</code></div><div class="doc"><div class="markdown"><p>Set metadata across a set of columns.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L299">view source</a></div></div><div class="public anchor" id="var-bind-.3E"><h3>bind-&gt;</h3><h4 class="type">macro</h4><div class="usage"><code>(bind-&gt; expr name &amp; forms)</code></div><div class="doc"><div class="markdown"><p>Threads like <code>-&gt;</code> but binds name to expr like <code>as-&gt;</code>:</p>
<pre><code class="clojure">(ds/bind-&gt; (ds/-&gt;dataset "test/data/stocks.csv") ds
           (assoc :logprice2 (dfn/log1p (ds "price")))
           (assoc :logp3 (dfn/* 2 (ds :logprice2)))
           (ds/select-columns ["price" :logprice2 :logp3])
           (ds-tens/dataset-&gt;tensor)
           (first))
</code></pre></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L98">view source</a></div></div><div class="public anchor" id="var-brief"><h3>brief</h3><div class="usage"><code>(brief ds options)</code><code>(brief ds)</code></div><div class="doc"><div class="markdown"><p>Get a brief description, in mapseq form of a dataset. A brief description is the mapseq form of descriptive stats.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L699">view source</a></div></div><div class="public anchor" id="var-categorical-.3Enumber"><h3>categorical-&gt;number</h3><div class="usage"><code>(categorical-&gt;number dataset filter-fn-or-ds)</code><code>(categorical-&gt;number dataset filter-fn-or-ds table-args)</code><code>(categorical-&gt;number dataset filter-fn-or-ds table-args result-datatype)</code></div><div class="doc"><div class="markdown"><p>Convert string columns to numeric columns. See tech.v3.dataset.categorical/fit-categorical-map.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L309">view source</a></div></div><div class="public anchor" id="var-categorical-.3Eone-hot"><h3>categorical-&gt;one-hot</h3><div class="usage"><code>(categorical-&gt;one-hot dataset filter-fn-or-ds)</code><code>(categorical-&gt;one-hot dataset filter-fn-or-ds table-args)</code><code>(categorical-&gt;one-hot dataset filter-fn-or-ds table-args result-datatype)</code></div><div class="doc"><div class="markdown"><p>Convert string columns to numeric columns. See tech.v3.dataset.categorical/fit-one-hot</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L329">view source</a></div></div><div class="public anchor" id="var-column"><h3>column</h3><div class="usage"><code>(column dataset colname)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L66">view source</a></div></div><div class="public anchor" id="var-column-.3Edataset"><h3>column-&gt;dataset</h3><div class="usage"><code>(column-&gt;dataset dataset colname transform-fn options)</code><code>(column-&gt;dataset dataset colname transform-fn)</code></div><div class="doc"><div class="markdown"><p>Transform a column into a sequence of maps using transform-fn. Return dataset created out of the sequence of maps.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L184">view source</a></div></div><div class="public anchor" id="var-column-cast"><h3>column-cast</h3><div class="usage"><code>(column-cast dataset colname datatype)</code></div><div class="doc"><div class="markdown"><p>Cast a column to a new datatype. This is never a lazy operation. If the old and new datatypes match and no cast-fn is provided then dtype/clone is called on the column.</p>
<p>colname may be a scalar or a tuple of [src-col dst-col].</p>
<p>datatype may be a datatype enumeration or a tuple of [datatype cast-fn] where cast-fn may return either a new value, :tech.v3.dataset.parse/missing, or :tech.v3.dataset.parse/parse-failure. Exceptions are propagated to the caller. The new column has at least the existing missing set (if no attempt returns :missing or :cast-failure). :cast-failure means the value gets added to metadata key :unparsed-data and the index gets added to :unparsed-indexes.</p>
<p>If the existing datatype is string, then tech.v3.datatype.column/parse-column is called.</p>
<p>Casts between numeric datatypes need no cast-fn but one may be provided. Casts to string need no cast-fn but one may be provided. Casts from string to anything will call tech.v3.dataset.column/parse-column.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L350">view source</a></div></div><div class="public anchor" id="var-column-count"><h3>column-count</h3><div class="usage"><code>(column-count dataset)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L55">view source</a></div></div><div class="public anchor" id="var-column-labeled-mapseq"><h3>column-labeled-mapseq</h3><div class="usage"><code>(column-labeled-mapseq dataset value-colname-seq)</code></div><div class="doc"><div class="markdown"><p>Given a dataset, return a sequence of maps where several columns are all stored  in a :value key and a :label key contains a column name. Used for quickly creating  timeseries or scatterplot labeled graphs. Returns a lazy sequence, not a reader!</p>
<p>See also <code>columnwise-concat</code></p>
<p>Return a sequence of maps with</p>
<pre><code class="clojure">  {... - columns not in colname-seq
   :value - value from one of the value columns
   :label - name of the column the value came from
  }
</code></pre></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L498">view source</a></div></div><div class="public anchor" id="var-column-names"><h3>column-names</h3><div class="usage"><code>(column-names dataset)</code></div><div class="doc"><div class="markdown"><p>In-order sequence of column names</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L73">view source</a></div></div><div class="public anchor" id="var-columns"><h3>columns</h3><div class="usage"><code>(columns dataset)</code></div><div class="doc"><div class="markdown"><p>Return sequence of all columns in dataset.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L60">view source</a></div></div><div class="public anchor" id="var-columns-with-missing-seq"><h3>columns-with-missing-seq</h3><div class="usage"><code>(columns-with-missing-seq dataset)</code></div><div class="doc"><div class="markdown"><p>Return a sequence of:</p>
<pre><code class="clojure">  {:column-name column-name
   :missing-count missing-count
  }
</code></pre>
<p>or nil of no columns are missing data.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L85">view source</a></div></div><div class="public anchor" id="var-columnwise-concat"><h3>columnwise-concat</h3><div class="usage"><code>(columnwise-concat dataset colnames {:keys [value-column-name colname-column-name], :or {value-column-name :value, colname-column-name :column}, :as _options})</code><code>(columnwise-concat dataset colnames)</code></div><div class="doc"><div class="markdown"><p>Given a dataset and a list of columns, produce a new dataset with  the columns concatenated to a new column with a :column column indicating  which column the original value came from. Any columns not mentioned in the  list of columns are duplicated.</p>
<p>Example:</p>
<pre><code class="clojure">user&gt; (-&gt; [{:a 1 :b 2 :c 3 :d 1} {:a 4 :b 5 :c 6 :d 2}]
          (ds/-&gt;dataset)
          (ds/columnwise-concat [:c :a :b]))
null [6 3]:

| :column | :value | :d |
|---------+--------+----|
|      :c |      3 |  1 |
|      :c |      6 |  2 |
|      :a |      1 |  1 |
|      :a |      4 |  2 |
|      :b |      2 |  1 |
|      :b |      5 |  2 |
</code></pre>
<p>Options:</p>
<p>value-column-name - defaults to :value  colname-column-name - defaults to :column</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L441">view source</a></div></div><div class="public anchor" id="var-concat"><h3>concat</h3><div class="usage"><code>(concat dataset &amp; datasets)</code></div><div class="doc"><div class="markdown"><p>Concatenate datasets in place. Respects missing values. Datasets must all have the same columns. Result column datatypes will be a widening cast of the datatypes. Also see concat-copying as this may be faster in many situations.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L466">view source</a></div></div><div class="public anchor" id="var-concat-copying"><h3>concat-copying</h3><div class="usage"><code>(concat-copying dataset &amp; datasets)</code></div><div class="doc"><div class="markdown"><p>Concatenate datasets into a new dataset copying data. Respects missing values. Datasets must all have the same columns. Result column datatypes will be a widening cast of the datatypes.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L450">view source</a></div></div><div class="public anchor" id="var-concat-inplace"><h3>concat-inplace</h3><div class="usage"><code>(concat-inplace dataset &amp; datasets)</code></div><div class="doc"><div class="markdown"><p>Concatenate datasets in place. Respects missing values. Datasets must all have the same columns. Result column datatypes will be a widening cast of the datatypes.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L442">view source</a></div></div><div class="public anchor" id="var-data-.3Edataset"><h3>data-&gt;dataset</h3><div class="usage"><code>(data-&gt;dataset {:keys [metadata columns], :as input})</code></div><div class="doc"><div class="markdown"><p>Convert a data-ized dataset created via dataset-&gt;data back into a full dataset</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L694">view source</a></div></div><div class="public anchor" id="var-dataset-.3Edata"><h3>dataset-&gt;data</h3><div class="usage"><code>(dataset-&gt;data ds)</code></div><div class="doc"><div class="markdown"><p>Convert a dataset to a pure clojure datastructure. Returns a map with two keys: {:metadata :columns}. :columns is a vector of column definitions appropriate for passing directly back into new-dataset. A column definition in this case is a map of {:name :missing :data :metadata}.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L666">view source</a></div></div><div class="public anchor" id="var-dataset-.3Esmile-dataframe"><h3>dataset-&gt;smile-dataframe</h3><div class="usage"><code>(dataset-&gt;smile-dataframe ds)</code></div><div class="doc"><div class="markdown"><p>Convert a dataset to a smile dataframe.</p>
<p>This operation may clone columns if they aren’t backed by java heap arrays. See ensure-array-backed</p>
<p>It is important to note that smile supports a subset of the functionality in tech.v3.dataset. One difference is smile columns have string column names and have no missing set.</p>
<p>Returns a smile.data.DataFrame</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L713">view source</a></div></div><div class="public anchor" id="var-dataset-name"><h3>dataset-name</h3><div class="usage"><code>(dataset-name dataset)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L39">view source</a></div></div><div class="public anchor" id="var-descriptive-stats"><h3>descriptive-stats</h3><div class="usage"><code>(descriptive-stats dataset)</code><code>(descriptive-stats dataset options)</code></div><div class="doc"><div class="markdown"><p>Get descriptive statistics across the columns of the dataset. In addition to the standard stats. Options: :stat-names - defaults to (remove #{:values :num-distinct-values}  (all-descriptive-stats-names)) :n-categorical-values - Number of categorical values to report in the ‘values’  field. Defaults to 21.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L627">view source</a></div></div><div class="public anchor" id="var-drop-columns"><h3>drop-columns</h3><div class="usage"><code>(drop-columns dataset col-name-seq)</code></div><div class="doc"><div class="markdown"><p>Same as remove-columns</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L136">view source</a></div></div><div class="public anchor" id="var-drop-missing"><h3>drop-missing</h3><div class="usage"><code>(drop-missing dataset-or-col)</code></div><div class="doc"><div class="markdown"><p>Remove missing entries by simply selecting out the missing indexes</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L275">view source</a></div></div><div class="public anchor" id="var-drop-rows"><h3>drop-rows</h3><div class="usage"><code>(drop-rows dataset-or-col row-indexes)</code></div><div class="doc"><div class="markdown"><p>Drop rows from dataset or column</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L245">view source</a></div></div><div class="public anchor" id="var-ensure-array-backed"><h3>ensure-array-backed</h3><div class="usage"><code>(ensure-array-backed ds {:keys [unpack?], :or {unpack? true}})</code><code>(ensure-array-backed ds)</code></div><div class="doc"><div class="markdown"><p>Ensure the column data in the dataset is stored in pure java arrays. This is sometimes necessary for interop with other libraries and this operation will force any lazy computations to complete. This also clears the missing set for each column and writes the missing values to the new arrays.</p>
<p>Columns that are already array backed and that have no missing values are not changed and retuned.</p>
<p>The postcondition is that dtype/-&gt;array will return a java array in the appropriate datatype for each column.</p>
<p>options - :unpack? - unpack packed datetime types. Defaults to true</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L529">view source</a></div></div><div class="public anchor" id="var-filter"><h3>filter</h3><div class="usage"><code>(filter dataset predicate)</code></div><div class="doc"><div class="markdown"><p>dataset-&gt;dataset transformation. Predicate is passed a map of colname-&gt;column-value.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L295">view source</a></div></div><div class="public anchor" id="var-filter-column"><h3>filter-column</h3><div class="usage"><code>(filter-column dataset colname predicate)</code></div><div class="doc"><div class="markdown"><p>Filter a given column by a predicate. Predicate is passed column values. If predicate is <em>not</em> an instance of Ifn it is treated as a value and will be used as if the predicate is #(= value %). Returns a dataset.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L304">view source</a></div></div><div class="public anchor" id="var-filter-dataset"><h3>filter-dataset</h3><div class="usage"><code>(filter-dataset dataset filter-fn-or-ds)</code></div><div class="doc"><div class="markdown"><p>Filter the columns of the dataset returning a new dataset. This pathway is designed to work with the tech.v3.dataset.column-filters namespace.</p>
<ul>
  <li>If filter-fn-or-ds is a dataset, it is returned.</li>
  <li>If filter-fn-or-ds is sequential, then select-columns is called.</li>
  <li>If filter-fn-or-ds is :all, all columns are returned</li>
  <li>If filter-fn-or-ds is an instance of IFn, the dataset is passed into it.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L209">view source</a></div></div><div class="public anchor" id="var-group-by"><h3>group-by</h3><div class="usage"><code>(group-by dataset key-fn)</code></div><div class="doc"><div class="markdown"><p>Produce a map of key-fn-value-&gt;dataset. key-fn is a function taking a map of colname-&gt;column-value. Selecting which columns are used in the key-fn using column-name-seq is optional but will greatly improve performance.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L335">view source</a></div></div><div class="public anchor" id="var-group-by-.3Eindexes"><h3>group-by-&gt;indexes</h3><div class="usage"><code>(group-by-&gt;indexes dataset key-fn)</code></div><div class="doc"><div class="markdown"><p>(Non-lazy) - Group a dataset and return a map of key-fn-value-&gt;indexes where indexes is an in-order contiguous group of indexes.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L327">view source</a></div></div><div class="public anchor" id="var-group-by-column"><h3>group-by-column</h3><div class="usage"><code>(group-by-column dataset colname)</code></div><div class="doc"><div class="markdown"><p>Return a map of column-value-&gt;dataset.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L353">view source</a></div></div><div class="public anchor" id="var-group-by-column-.3Eindexes"><h3>group-by-column-&gt;indexes</h3><div class="usage"><code>(group-by-column-&gt;indexes dataset colname)</code></div><div class="doc"><div class="markdown"><p>(Non-lazy) - Group a dataset by a column return a map of column-val-&gt;indexes where indexes is an in-order contiguous group of indexes.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L345">view source</a></div></div><div class="public anchor" id="var-has-column.3F"><h3>has-column?</h3><div class="usage"><code>(has-column? dataset column-name)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L80">view source</a></div></div><div class="public anchor" id="var-head"><h3>head</h3><div class="usage"><code>(head n dataset)</code><code>(head dataset)</code></div><div class="doc"><div class="markdown"><p>Get the first n row of a dataset. Equivalent to `(select-rows ds (range n)). Arguments are reversed, however, so this can be used in -&gt;&gt; operators.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L133">view source</a></div></div><div class="public anchor" id="var-major-version"><h3>major-version</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Datasets will now identify their major versions</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L36">view source</a></div></div><div class="public anchor" id="var-mapseq-reader"><h3>mapseq-reader</h3><div class="usage"><code>(mapseq-reader dataset)</code></div><div class="doc"><div class="markdown"><p>Return a reader that produces a map of column-name-&gt;column-value</p>
<p>Options: :missing-nil? - Default to true - Substitute nil in for missing values to make  missing value detection downstream to be column datatype independent.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/readers.clj#L39">view source</a></div></div><div class="public anchor" id="var-missing"><h3>missing</h3><div class="usage"><code>(missing dataset-or-col)</code></div><div class="doc"><div class="markdown"><p>Given a dataset or a column, return the missing set as a roaring bitmap</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L265">view source</a></div></div><div class="public anchor" id="var-new-column"><h3>new-column</h3><div class="usage"><code>(new-column dataset column-name values)</code></div><div class="doc"><div class="markdown"><p>Create a new column from some values</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L110">view source</a></div></div><div class="public anchor" id="var-new-dataset"><h3>new-dataset</h3><div class="usage"><code>(new-dataset options ds-metadata column-seq)</code><code>(new-dataset options column-seq)</code><code>(new-dataset column-seq)</code></div><div class="doc"><div class="markdown"><p>Create a new dataset from a sequence of columns. Data will be converted into columns using ds-col-proto/ensure-column-seq. If the column seq is simply a collection of vectors, for instance, columns will be named ordinally. options map -  :dataset-name - Name of the dataset. Defaults to "_unnamed".  :key-fn - Key function used on all column names before insertion into dataset.</p>
<p>The return value fulfills the dataset protocols.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/impl/dataset.clj#L380">view source</a></div></div><div class="public anchor" id="var-order-column-names"><h3>order-column-names</h3><div class="usage"><code>(order-column-names dataset colname-seq)</code></div><div class="doc"><div class="markdown"><p>Order a sequence of columns names so they match the order in the original dataset. Missing columns are placed last.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L149">view source</a></div></div><div class="public anchor" id="var-rand-nth"><h3>rand-nth</h3><div class="usage"><code>(rand-nth dataset)</code></div><div class="doc"><div class="markdown"><p>Return a random row from the dataset in map format</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L178">view source</a></div></div><div class="public anchor" id="var-remove-column"><h3>remove-column</h3><div class="usage"><code>(remove-column dataset col-name)</code></div><div class="doc"><div class="markdown"><p>Same as:</p>
<pre><code class="clojure">(dissoc dataset col-name)
</code></pre></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L119">view source</a></div></div><div class="public anchor" id="var-remove-columns"><h3>remove-columns</h3><div class="usage"><code>(remove-columns dataset colname-seq)</code></div><div class="doc"><div class="markdown"><p>Same as drop-columns</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L130">view source</a></div></div><div class="public anchor" id="var-remove-rows"><h3>remove-rows</h3><div class="usage"><code>(remove-rows dataset-or-col row-indexes)</code></div><div class="doc"><div class="markdown"><p>Same as drop-rows.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L259">view source</a></div></div><div class="public anchor" id="var-rename-columns"><h3>rename-columns</h3><div class="usage"><code>(rename-columns dataset colname-map)</code></div><div class="doc"><div class="markdown"><p>Rename columns using a map. Does not reorder columns.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L224">view source</a></div></div><div class="public anchor" id="var-replace-missing"><h3>replace-missing</h3><div class="usage"><code>(replace-missing ds)</code><code>(replace-missing ds strategy)</code><code>(replace-missing ds columns-selector strategy)</code><code>(replace-missing ds columns-selector strategy value)</code></div><div class="doc"><div class="markdown"><p>Replace missing values in some columns with a given strategy. The columns selector may be any legal argument to select-columns. Strategies may be: - <code>:down</code> - take value from previous non-missing row if possible else use next  non-missing row. - <code>:up</code> - take value from next non-missing row if possible else use previous  non-missing row. - <code>:mid</code> - Use midpoint of averaged values between previous and next nonmissing  rows. - <code>:lerp</code> - Linearly interpolate values between previous and next nonmissing rows. - <code>:value</code> - Value will be provided - see below. value may be provided which will then be used. Value may be a function in which case it will be called on the column with missing values elided and the return will be used to as the filler.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/missing.clj#L171">view source</a></div></div><div class="public anchor" id="var-replace-missing-value"><h3>replace-missing-value</h3><div class="usage"><code>(replace-missing-value dataset filter-fn-or-ds scalar-value)</code><code>(replace-missing-value dataset scalar-value)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L272">view source</a></div></div><div class="public anchor" id="var-row-count"><h3>row-count</h3><div class="usage"><code>(row-count dataset-or-col)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L48">view source</a></div></div><div class="public anchor" id="var-sample"><h3>sample</h3><div class="usage"><code>(sample n replacement? dataset)</code><code>(sample n dataset)</code><code>(sample dataset)</code></div><div class="doc"><div class="markdown"><p>Sample n-rows from a dataset. Defaults to sampling <em>without</em> replacement.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L162">view source</a></div></div><div class="public anchor" id="var-select"><h3>select</h3><div class="usage"><code>(select dataset colname-seq index-seq)</code></div><div class="doc"><div class="markdown"><p>Reorder/trim dataset according to this sequence of indexes. Returns a new dataset. colname-seq - one of:  - :all - all the columns  - sequence of column names - those columns in that order.  - implementation of java.util.Map - column order is dictate by map iteration order  selected columns are subsequently named after the corresponding value in the map.  similar to <code>rename-columns</code> except this trims the result to be only the columns  in the map. index-seq - either keyword :all or list of indexes. May contain duplicates.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L178">view source</a></div></div><div class="public anchor" id="var-select-columns"><h3>select-columns</h3><div class="usage"><code>(select-columns dataset col-name-seq)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L219">view source</a></div></div><div class="public anchor" id="var-select-missing"><h3>select-missing</h3><div class="usage"><code>(select-missing ds)</code></div><div class="doc"><div class="markdown"><p>Select only rows with missing values</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/missing.clj#L23">view source</a></div></div><div class="public anchor" id="var-select-rows"><h3>select-rows</h3><div class="usage"><code>(select-rows dataset-or-col row-indexes)</code></div><div class="doc"><div class="markdown"><p>Select rows from the dataset or column.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L237">view source</a></div></div><div class="public anchor" id="var-set-dataset-name"><h3>set-dataset-name</h3><div class="usage"><code>(set-dataset-name dataset ds-name)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L43">view source</a></div></div><div class="public anchor" id="var-shape"><h3>shape</h3><div class="usage"><code>(shape dataset)</code></div><div class="doc"><div class="markdown"><p>Returns shape in column-major format of [n-columns n-rows].</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L120">view source</a></div></div><div class="public anchor" id="var-shuffle"><h3>shuffle</h3><div class="usage"><code>(shuffle dataset)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L157">view source</a></div></div><div class="public anchor" id="var-sort-by"><h3>sort-by</h3><div class="usage"><code>(sort-by dataset key-fn compare-fn)</code><code>(sort-by dataset key-fn)</code></div><div class="doc"><div class="markdown"><p>Sort a dataset by a key-fn and compare-fn.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L363">view source</a></div></div><div class="public anchor" id="var-sort-by-column"><h3>sort-by-column</h3><div class="usage"><code>(sort-by-column dataset colname compare-fn)</code><code>(sort-by-column dataset colname)</code></div><div class="doc"><div class="markdown"><p>Sort a dataset by a given column using the given compare fn.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L374">view source</a></div></div><div class="public anchor" id="var-tail"><h3>tail</h3><div class="usage"><code>(tail n dataset)</code><code>(tail dataset)</code></div><div class="doc"><div class="markdown"><p>Get the last n rows of a dataset. Equivalent to `(select-rows ds (range …)). Argument order is dataset-last, however, so this can be used in -&gt;&gt; operators.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L144">view source</a></div></div><div class="public anchor" id="var-take-nth"><h3>take-nth</h3><div class="usage"><code>(take-nth dataset n-val)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L516">view source</a></div></div><div class="public anchor" id="var-unique-by"><h3>unique-by</h3><div class="usage"><code>(unique-by dataset {:keys [keep-fn], :or {keep-fn (fn* [p1__15212# p2__15211#] (first p2__15211#))}, :as _options} map-fn)</code><code>(unique-by dataset map-fn)</code></div><div class="doc"><div class="markdown"><p>Map-fn function gets passed map for each row, rows are grouped by the return value. Keep-fn is used to decide the index to keep.</p>
<p>:keep-fn - Function from key,idx-seq-&gt;idx. Defaults to #(first %2).</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L481">view source</a></div></div><div class="public anchor" id="var-unique-by-column"><h3>unique-by-column</h3><div class="usage"><code>(unique-by-column dataset {:keys [keep-fn], :or {keep-fn (fn* [p1__15225# p2__15224#] (first p2__15224#))}, :as _options} colname)</code><code>(unique-by-column dataset colname)</code></div><div class="doc"><div class="markdown"><p>Map-fn function gets passed map for each row, rows are grouped by the return value. Keep-fn is used to decide the index to keep.</p>
<p>:keep-fn - Function from key, idx-seq-&gt;idx. Defaults to #(first %2).</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L498">view source</a></div></div><div class="public anchor" id="var-unordered-select"><h3>unordered-select</h3><div class="usage"><code>(unordered-select dataset colname-seq index-seq)</code></div><div class="doc"><div class="markdown"><p>Perform a selection but use the order of the columns in the existing table; do <em>not</em> reorder the columns based on colname-seq. Useful when doing selection based on sets or persistent hash maps.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L196">view source</a></div></div><div class="public anchor" id="var-unroll-column"><h3>unroll-column</h3><div class="usage"><code>(unroll-column dataset column-name)</code><code>(unroll-column dataset column-name options)</code></div><div class="doc"><div class="markdown"><p>Unroll a column that has some (or all) sequential data as entries.  Returns a new dataset with same columns but with other columns duplicated  where the unroll happened. Column now contains only scalar data.</p>
<p>Any missing indexes are dropped.</p>
<pre><code class="clojure">user&gt; (-&gt; (ds/-&gt;dataset [{:a 1 :b [2 3]}
                              {:a 2 :b [4 5]}
                              {:a 3 :b :a}])
               (ds/unroll-column :b {:indexes? true}))
  _unnamed [5 3]:

| :a | :b | :indexes |
|----+----+----------|
|  1 |  2 |        0 |
|  1 |  3 |        1 |
|  2 |  4 |        0 |
|  2 |  5 |        1 |
|  3 | :a |        0 |
</code></pre>
<p>Options -  :datatype - datatype of the resulting column if one aside from :object is desired.  :indexes? - If true, create a new column that records the indexes of the values from  the original column. Can also be a truthy value (like a keyword) and the column  will be named this.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L519">view source</a></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update lhs-ds filter-fn-or-ds update-fn &amp; args)</code></div><div class="doc"><div class="markdown"><p>Update this dataset. Filters this dataset into a new dataset,  applies update-fn, then merges the result into original dataset.</p>
<p>This pathways is designed to work with the tech.v3.dataset.column-filters namespace.</p>
<ul>
  <li><code>filter-fn-or-ds</code> is a generalized parameter. May be a function,  a dataset or a sequence of columns</li>
  <li>update-fn must take the dataset as the first argument and must return  a dataset.</li>
</ul>
<pre><code class="clojure">(ds/bind-&gt; (ds/-&gt;dataset dataset) ds
           (ds/remove-column "Id")
           (ds/update cf/string ds/replace-missing-value "NA")
           (ds/update-elemwise cf/string #(get {"" "NA"} % %))
           (ds/update cf/numeric ds/replace-missing-value 0)
           (ds/update cf/boolean ds/replace-missing-value false)
           (ds/update-columnwise (cf/union (cf/numeric ds) (cf/boolean ds))
                                 #(dtype/elemwise-cast % :float64)))
</code></pre></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L231">view source</a></div></div><div class="public anchor" id="var-update-column"><h3>update-column</h3><div class="usage"><code>(update-column dataset col-name update-fn)</code></div><div class="doc"><div class="markdown"><p>Update a column returning a new dataset. update-fn is a column-&gt;column transformation. Error if column does not exist.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L142">view source</a></div></div><div class="public anchor" id="var-update-columns"><h3>update-columns</h3><div class="usage"><code>(update-columns dataset column-name-seq update-fn)</code></div><div class="doc"><div class="markdown"><p>Update a sequence of columns.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/base.clj#L161">view source</a></div></div><div class="public anchor" id="var-update-columnwise"><h3>update-columnwise</h3><div class="usage"><code>(update-columnwise dataset filter-fn-or-ds cwise-update-fn &amp; args)</code></div><div class="doc"><div class="markdown"><p>Call update-fn on each column of the dataset. Returns the dataset. See arguments to update</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L259">view source</a></div></div><div class="public anchor" id="var-update-elemwise"><h3>update-elemwise</h3><div class="usage"><code>(update-elemwise dataset filter-fn-or-ds map-fn)</code><code>(update-elemwise dataset map-fn)</code></div><div class="doc"><div class="markdown"><p>Replace all elements in selected columns by calling selected function on each element. column-name-seq must be a sequence of column names if provided. filter-fn-or-ds has same rules as update. Implicitly clears the missing set so function must deal with type-specific missing values correctly. Returns new dataset</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset.clj#L286">view source</a></div></div><div class="public anchor" id="var-value-reader"><h3>value-reader</h3><div class="usage"><code>(value-reader dataset)</code></div><div class="doc"><div class="markdown"><p>Return a reader that produces a reader of column values per index. Options: :missing-nil? - Default to true - Substitute nil in for missing values to make  missing value detection downstream to be column datatype independent.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/readers.clj#L21">view source</a></div></div><div class="public anchor" id="var-write.21"><h3>write!</h3><div class="usage"><code>(write! dataset output-path options)</code><code>(write! dataset output-path)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/dtype-next/src/tech/v3/dataset/io.clj#L203">view source</a></div></div></div></body></html>