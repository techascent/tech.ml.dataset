<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>tech.v3.libs.arrow documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">tech.ml.dataset</span> <span class="project-version">5.00-alpha-14-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="columns-readers-and-datatypes.html"><div class="inner"><span>Columns, Readers, and Datatypes</span></div></a></li><li class="depth-1 "><a href="nippy-serialization-rocks.html"><div class="inner"><span>Nippy Rocks!</span></div></a></li><li class="depth-1 "><a href="quick-reference.html"><div class="inner"><span>Quick Reference - Core API</span></div></a></li><li class="depth-1 "><a href="walkthrough.html"><div class="inner"><span>tech.ml.dataset Walkthrough</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tech</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v3</span></div></div></li><li class="depth-3"><a href="tech.v3.dataset.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dataset</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.categorical.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>categorical</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.column-filters.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>column-filters</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-5 branch"><a href="tech.v3.dataset.io.datetime.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datetime</span></div></a></li><li class="depth-5 branch"><a href="tech.v3.dataset.io.string-row-parser.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string-row-parser</span></div></a></li><li class="depth-5"><a href="tech.v3.dataset.io.univocity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>univocity</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.join.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>join</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.math.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>math</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.modelling.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>modelling</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.dataset.print.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>print</span></div></a></li><li class="depth-4"><a href="tech.v3.dataset.tensor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tensor</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>libs</span></div></div></li><li class="depth-4 branch current"><a href="tech.v3.libs.arrow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>arrow</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.libs.fastexcel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fastexcel</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.libs.parquet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parquet</span></div></a></li><li class="depth-4"><a href="tech.v3.libs.poi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>poi</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-message-seq"><div class="inner"><span>message-seq</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-parse-message"><div class="inner"><span>parse-message</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-parse-message-printable"><div class="inner"><span>parse-message-printable</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-read-stream-dataset-copying"><div class="inner"><span>read-stream-dataset-copying</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-read-stream-dataset-inplace"><div class="inner"><span>read-stream-dataset-inplace</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-stream-.3Edataset-seq-copying"><div class="inner"><span>stream-&gt;dataset-seq-copying</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-stream-.3Edataset-seq-inplace"><div class="inner"><span>stream-&gt;dataset-seq-inplace</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-visualize-arrow-stream"><div class="inner"><span>visualize-arrow-stream</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-write-dataset-seq-to-stream.21"><div class="inner"><span>write-dataset-seq-to-stream!</span></div></a></li><li class="depth-1"><a href="tech.v3.libs.arrow.html#var-write-dataset-to-stream.21"><div class="inner"><span>write-dataset-to-stream!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">tech.v3.libs.arrow</h1><div class="doc"><div class="markdown"><p>Support for reading/writing arrow files. Users must include the apache arrow  dependencies in their project:</p>
<pre><code class="clojure">[org.apache.arrow/arrow-memory-netty "1.0.0"]
[org.apache.arrow/arrow-memory-core "1.0.0"]
[org.apache.arrow/arrow-vector "1.0.0" :exclusions [commons-codec]]
</code></pre></div></div><div class="public anchor" id="var-message-seq"><h3>message-seq</h3><div class="usage"><code>(message-seq data)</code></div><div class="doc"><div class="markdown"><p>Given a native buffer of arrow stream data, produce a sequence of flatbuf messages</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/in_place.clj#L76">view source</a></div></div><div class="public anchor" id="var-parse-message"><h3>parse-message</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Given a message, parse it just a bit into a more interpretable datastructure.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/in_place.clj#L142">view source</a></div></div><div class="public anchor" id="var-parse-message-printable"><h3>parse-message-printable</h3><div class="usage"><code>(parse-message-printable msg)</code></div><div class="doc"><div class="markdown"><p>Parse the message and return something that you can look at in the repl.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/in_place.clj#L165">view source</a></div></div><div class="public anchor" id="var-read-stream-dataset-copying"><h3>read-stream-dataset-copying</h3><div class="usage"><code>(read-stream-dataset-copying path options)</code><code>(read-stream-dataset-copying path)</code></div><div class="doc"><div class="markdown"><p>Read a single record batch and return a dataset. It is an error if there are more record batches in the file.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/copying.clj#L403">view source</a></div></div><div class="public anchor" id="var-read-stream-dataset-inplace"><h3>read-stream-dataset-inplace</h3><div class="usage"><code>(read-stream-dataset-inplace fname &amp; [options])</code></div><div class="doc"><div class="markdown"><p>Loads data up to and including the first data record. Returns the dataset and the memory-mapped file. This method is expected to be called from within a stack resource context.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/in_place.clj#L320">view source</a></div></div><div class="public anchor" id="var-stream-.3Edataset-seq-copying"><h3>stream-&gt;dataset-seq-copying</h3><div class="usage"><code>(stream-&gt;dataset-seq-copying path options)</code><code>(stream-&gt;dataset-seq-copying path)</code></div><div class="doc"><div class="markdown"><p>Read a complete arrow file lazily. Each data record is copied into an independent dataset. Stream is closed when the last dataset is loaded.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/copying.clj#L392">view source</a></div></div><div class="public anchor" id="var-stream-.3Edataset-seq-inplace"><h3>stream-&gt;dataset-seq-inplace</h3><div class="usage"><code>(stream-&gt;dataset-seq-inplace fname &amp; [options])</code></div><div class="doc"><div class="markdown"><p>Loads data up to and including the first data record. Returns the a lazy sequence of datasets. Datasets use mmapped data, however, so realizing the entire sequence is usually safe, even for datasets that are larger than available RAM. This method is expected to be called from within a stack resource context unless options include {:resource-type :gc}. See documentation for tech.v3.datatype.mmap/mmap-file.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/in_place.clj#L302">view source</a></div></div><div class="public anchor" id="var-visualize-arrow-stream"><h3>visualize-arrow-stream</h3><div class="usage"><code>(visualize-arrow-stream fname &amp; [options])</code></div><div class="doc"><div class="markdown"><p>Loads an arrow file via mmap pathway and parses the file into a lower-level description that prints well to the REPL. Useful for quickly seeing what is in an Arrow stream. Returned value can be used to construct datasets via in-place/parse-next-dataset. See source code to stream-&gt;dataset-seq-inplace.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow.clj#L30">view source</a></div></div><div class="public anchor" id="var-write-dataset-seq-to-stream.21"><h3>write-dataset-seq-to-stream!</h3><div class="usage"><code>(write-dataset-seq-to-stream! ds-seq path options)</code><code>(write-dataset-seq-to-stream! ds path)</code></div><div class="doc"><div class="markdown"><p>Write a sequence of datasets to a stream. Datasets are written with doseq. All datasets must be amenable to being written into vectors of the type dictated by the schema of the first dataset. Each dataset is written to a separate batch.</p>
<ul>
  <li><code>strings-as-text?</code>: - defaults to false - Save out strings into arrow files without  dictionaries. This works well if you want to load an arrow file in-place or if  you know the strings in your dataset are either really large or should not be in  string tables.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/copying.clj#L220">view source</a></div></div><div class="public anchor" id="var-write-dataset-to-stream.21"><h3>write-dataset-to-stream!</h3><div class="usage"><code>(write-dataset-to-stream! ds path options)</code><code>(write-dataset-to-stream! ds path)</code></div><div class="doc"><div class="markdown"><p>Write a dataset as an arrow stream file. File will contain one record set.</p>
<p>Options:</p>
<ul>
  <li><code>strings-as-text?</code>: - defaults to false - Save out strings into arrow files without  dictionaries. This works well if you want to load an arrow file in-place or if  you know the strings in your dataset are either really large or should not be in  string tables.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/techascent/tech.ml.dataset/blob/master/src/tech/v3/libs/arrow/copying.clj#L194">view source</a></div></div></div></body></html>